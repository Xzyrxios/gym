<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Tr√§ningslogg ‚Äì 3-dagarsprogram</title>
 
    <!-- PWA & iOS-app meta -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f172a">

  <!-- iOS PWA-meta -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Tr√§ning">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="icon" href="icons/icon-192.png" type="image/png" sizes="192x192">

  <style>
    :root { --bg:#0f172a; --panel:#111827; --muted:#94a3b8; --txt:#e5e7eb; --accent:#22d3ee; }
    *{box-sizing:border-box}
    html{-webkit-text-size-adjust:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:linear-gradient(180deg,#0b1022,#0f172a 30%,#0b1022);color:var(--txt)}
    .wrap{max-width:960px;margin:24px auto;padding:16px}
    .card{background:rgba(255,255,255,.04);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.06);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35);margin-bottom:20px}
    h1{font-size:clamp(22px,3.6vw,34px);margin:0 0 12px;letter-spacing:.3px}
    .muted{color:var(--muted)}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .day-btn{flex:1 1 160px;border:1px solid rgba(255,255,255,.18);border-radius:14px;padding:14px 16px;text-align:center;cursor:pointer;user-select:none;background:#0b1224;transition:.15s;min-height:44px;color:var(--txt);font-weight:600;font-size:16px}
    .day-btn:hover{transform:translateY(-1px);border-color:var(--accent);background:#162038}
    .day-btn.active{outline:2px solid var(--accent);background:#1c273d;color:#fff}
    .bar{display:flex;gap:10px;align-items:center;justify-content:space-between;margin:14px 0 10px}
    input, button, select, textarea{font:inherit}
    input[type="number"], input[type="date"], input[type="password"], input[type="text"], select{
      background:#0b1224;border:1px solid rgba(255,255,255,.12);border-radius:12px;color:var(--txt);padding:12px 14px;
      font-size:16px;min-height:44px;-webkit-appearance:none;appearance:none;
    }
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button{ -webkit-appearance: none; margin: 0; }
    input[type=number]{ -moz-appearance:textfield; }

    button{background:var(--accent);color:#001018;border:0;border-radius:12px;padding:12px 16px;font-weight:600;cursor:pointer;min-height:44px}
    button.ghost{background:transparent;color:var(--txt);border:1px solid rgba(255,255,255,.18)}
    .exercise{border-top:2px solid rgba(255,255,255,.15);padding:18px 0;margin-top:18px}
    .exercise h3{margin:0 0 8px;font-size:18px}
    .note{font-size:13px;color:var(--muted);margin-top:6px}

    /* Set-grupper ‚Äì robust mot iOS radbrytning */
    .sets{display:grid;gap:10px;margin-top:10px}
    .sets-head, .set-row{display:grid;grid-template-columns:56px 1fr 1fr 44px;gap:8px;align-items:center}
    .sets-head label{font-size:12px;color:var(--muted)}
    .set-row div{color:var(--muted)}
    .set-row input{width:100%;min-width:0;box-sizing:border-box}
    .set-row button{white-space:nowrap}

    .pill{display:inline-block;border:1px solid rgba(255,255,255,.18);border-radius:999px;padding:6px 10px;font-size:13px;color:var(--txt);background:#1e293b;font-weight:500}
    details{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:10px 12px}
    .hint{font-size:12px;color:#9ae6ff;margin-top:6px}
    .empty{color:var(--muted);font-style:italic}
    .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.55);padding:12px}
    .modal.open{display:grid}
    .modal .box{background:#0b1224;border:1px solid rgba(255,255,255,.15);border-radius:16px;padding:16px;max-width:560px;width:min(92vw,560px)}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}

    @media (max-width:820px){.bar{flex-direction:column;align-items:stretch}.bar>.row{width:100%;justify-content:space-between}.bar button{flex:1 1 160px}}
    @media (max-width:560px){
      .wrap{padding:12px}
      .row{gap:10px}
      .day-btn{flex:1 1 calc(50% - 10px)}
      .sets-head, .set-row{grid-template-columns:52px 1fr 1fr 40px}
    }
    @media (max-width:400px){
      .day-btn{flex:1 1 100%}
      .sets-head, .set-row{grid-template-columns:50px 1fr 1fr 40px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div style="margin-bottom:12px">
      <a href="stats.html" class="button" style="background:var(--accent);color:#001018;padding:12px 16px;border-radius:12px;text-decoration:none;font-weight:600">üìä Statistik</a>
    </div>

    <div class="card">
      <h1>Tr√§ningslogg <span class="muted">‚Äì 3 dagar</span></h1>
      <p class="muted">V√§lj dag, logga set/reps/vikt. Allt sparas lokalt. Du kan √§ven <b>synka till GitHub</b>.</p>

      <div class="row" id="dayButtons">
        <button class="day-btn" id="btn-day-1">Dag 1</button>
        <button class="day-btn" id="btn-day-2">Dag 2</button>
        <button class="day-btn" id="btn-day-3">Dag 3</button>
      </div>

      <div class="bar">
        <div class="row" style="align-items:center;gap:8px;flex-wrap:wrap">
          <label for="date" class="muted" style="flex:0 0 auto">Datum</label>
          <input id="date" type="date" style="flex:0 1 auto"/>
          <span id="selectedDayLabel" class="pill">Ingen dag vald</span>
        </div>
        <div class="row" style="flex-wrap:wrap;gap:6px">
          <button id="saveBtn">Spara</button>
          <button id="syncBtn" class="ghost">Synka</button>
          <button id="pullBtn" class="ghost">H√§mta</button>
          <button id="cfgBtn" class="ghost">Inst√§llningar</button>
        </div>
      </div>
    </div>

    <div class="card" id="exercisesPanel">
      <p class="empty">V√§lj en dag ovan f√∂r att se dina √∂vningar.</p>
    </div>

    <div class="card" id="historyPanel">
      <h2 style="margin:6px 0 8px;font-size:18px">Senaste historik</h2>
      <div id="historyBody" class="muted">Inget sparat √§nnu.</div>
    </div>
  </div>

  <!-- Inst√§llningar -->
  <div class="modal" id="cfgModal" aria-hidden="true">
    <div class="box">
      <h2 style="margin:0 0 8px;font-size:18px">GitHub-inst√§llningar</h2>
      <div class="grid">
        <label>√Ñgare <input id="ghOwner" type="text"/></label>
        <label>Repo <input id="ghRepo" type="text"/></label>
        <label>Branch <input id="ghBranch" type="text"/></label>
        <label>S√∂kv√§g <input id="ghPath" type="text"/></label>
        <label style="grid-column:1/-1">Token <input id="ghToken" type="password" placeholder="ghp_xxx..."/></label>
      </div>
      <div class="row" style="justify-content:flex-end;margin-top:12px;gap:8px">
        <button id="cfgSave">Spara</button>
        <button id="cfgClose" class="ghost">St√§ng</button>
      </div>
    </div>
  </div>

<script>
// ===== Program & regler
const PROGRAM = {
  1: [
    { id:'deadlift', name:'Marklyft', range:[5,8], progression:{type:'weekly_weight', increment:2.5} },
    { id:'ohp', name:'Press √∂ver huvudet', range:[8,10], progression:{type:'weekly_weight', increment:1} },
    { id:'pullups', name:'Pullups', range:[5,10], progression:{type:'weekly_rep'}, bw:true,
      note:'√ñka 1 rep/vecka. Ta bort band n√§r du n√•r 10 reps.' },
    { id:'tri-bi', name:'Triceps/Biceps (varannan √∂vning)', range:[10,15], progression:{type:'weekly_rep'},
      note:'En extra rep/vecka. √ñka vikt n√§r du klarar 15 reps.' },
  ],
  2: [
    { id:'bench', name:'B√§nkpress', range:[5,8], progression:{type:'weekly_weight', increment:2.5} },
    { id:'row', name:'St√•ngrodd', range:[10,10], progression:{type:'weekly_weight', increment:2.5} },
    { id:'lunge-db', name:'Utfall med hantlar (per ben)', range:[10,15], progression:{type:'weekly_weight', increment:1.25},
      note:'√ñka i vikt n√§r du √§r uppe p√• 15 reps.' },
    { id:'lat-raise', name:'Sidolyft med hantlar', range:[10,15], progression:{type:'weekly_weight', increment:1},
      note:'Samma princip som ovan.' },
  ],
  3: [
    { id:'squat', name:'Kn√§b√∂j', range:[5,8], progression:{type:'weekly_weight', increment:2.5} },
    { id:'pushups', name:'Armh√§vningar', range:[8,999], progression:{type:'weekly_rep'}, bw:true,
      note:'√ñka 1 rep/vecka.' },
    { id:'ringrow', name:'Ringrodd', range:[8,15], progression:{type:'weekly_rep'}, bw:true,
      note:'√ñka 1 rep/vecka. Luta dig mer bak√•t n√§r du klarar 15.' },
    { id:'bi-tri', name:'Biceps/Triceps (varannan √∂vning)', range:[10,15], progression:{type:'weekly_rep'},
      note:'Samma som dag 1.' },
  ]
};

// ===== Lagring
const STORAGE_KEY = 'trainingLogsV1';
const readLogs = () => JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
const writeLogs = logs => localStorage.setItem(STORAGE_KEY, JSON.stringify(logs));

// ===== GitHub Sync (f√∂rifyllt repo, token via modal f√∂rsta g√•ngen)
const GH_KEY = 'trainingGithubCfgV1';
const GH = { owner:'Xzyrxios', repo:'gym', branch:'main', path:'data/traningslogg.json', token:'' };
function loadGhCfg(){ Object.assign(GH, JSON.parse(localStorage.getItem(GH_KEY) || '{}')); }
function saveGhCfg(){ localStorage.setItem(GH_KEY, JSON.stringify(GH)); }
function b64EncodeUnicode(str){ return btoa(unescape(encodeURIComponent(str))); }
function b64DecodeUnicode(str){ return decodeURIComponent(escape(atob(str))); }
async function ghGetFile(){
  if(!GH.owner||!GH.repo||!GH.path||!GH.branch||!GH.token) throw new Error('Saknar GitHub-inst√§llningar.');
  const url = `https://api.github.com/repos/${GH.owner}/${GH.repo}/contents/${GH.path}?ref=${encodeURIComponent(GH.branch)}`;
  const res = await fetch(url,{
    headers:{'Accept':'application/vnd.github+json','Authorization':`Bearer ${GH.token}`,'X-GitHub-Api-Version':'2022-11-28'}
  });
  if(res.status===404) return null;
  if(!res.ok) throw new Error('GitHub GET misslyckades: '+res.status);
  return await res.json();
}
async function ghPutFile(jsonText){
  const existing = await ghGetFile();
  const body = { message:'Update training logs', content:b64EncodeUnicode(jsonText), branch:GH.branch };
  if(existing && existing.sha) body.sha = existing.sha;
  const url = `https://api.github.com/repos/${GH.owner}/${GH.repo}/contents/${GH.path}`;
  const res = await fetch(url,{
    method:'PUT',
    headers:{'Accept':'application/vnd.github+json','Authorization':`Bearer ${GH.token}`,'X-GitHub-Api-Version':'2022-11-28'},
    body:JSON.stringify(body)
  });
  if(!res.ok) throw new Error('GitHub PUT misslyckades: '+res.status);
  return await res.json();
}

// ===== Hj√§lpfunktioner
const fmtRange = r => r[0]===r[1] ? `${r[0]} reps` : `${r[0]}‚Äì${r[1]} reps`;
const todayISO = () => new Date().toISOString().slice(0,10);
const h = (tag, attrs={}, ...children) => {
  const el=document.createElement(tag);
  for (const [k,v] of Object.entries(attrs)) {
    if (k==='class') el.className=v;
    else if (k==='html') el.innerHTML=v;
    else if (k.startsWith('on')) el.addEventListener(k.slice(2), v);
    else el.setAttribute(k,v);
  }
  for (const ch of children) el.append(ch);
  return el;
};

// ===== Dagar
let selectedDay = null;
['1','2','3'].forEach(d=>{
  document.getElementById(`btn-day-${d}`).addEventListener('click', ()=>selectDay(Number(d)));
});
const selectedDayLabel = document.getElementById('selectedDayLabel');
function selectDay(day){
  selectedDay=day;
  document.querySelectorAll('.day-btn').forEach(el=>el.classList.remove('active'));
  document.getElementById(`btn-day-${day}`).classList.add('active');
  selectedDayLabel.textContent = `Dag ${day}`;
  renderExercises();
}

// ===== Historik & hintar
const historyBody = document.getElementById('historyBody');
function updateHistory(){
  const logs=readLogs();
  if(!logs.length){ historyBody.textContent='Inget sparat √§nnu.'; return; }
  const recent=logs.slice(-6).reverse();
  historyBody.innerHTML='';
  recent.forEach(l=>{
    const dd=new Date(l.date).toLocaleDateString('sv-SE');
    const box=h('details',{}, h('summary',{}, `${dd} ‚Äì Dag ${l.day}`));
    const ul=h('ul',{});
    l.entries.forEach(e=>{
      const txt=`${e.exercise}: ${e.sets.map(s=>`${s.reps}x${s.weight||0}kg`).join(', ')}`;
      ul.append(h('li',{}, txt));
    });
    box.append(ul);
    historyBody.append(box);
  });
}

function lastFor(exId){
  const logs=readLogs().slice().reverse();
  for(const l of logs){
    const e=l.entries.find(x=>x.id===exId);
    if(e) return e;
  }
  return null;
}

function updateHint(ex, el){
  const last=lastFor(ex.id);
  if(!last){ el.textContent='Tips: logga f√∂rsta passet, s√• f√•r du f√∂rslag n√§sta g√•ng.'; return; }
  const p=ex.progression||{};
  let msg='Senast: '+ last.sets.map(s=>`${s.reps}x${s.weight||0}kg`).join(', ');
  if(p.type==='weekly_weight'){
    const maxW=Math.max(...last.sets.map(s=>Number(s.weight)||0));
    msg+=` ‚Üí F√∂rslag: ~${(maxW + (p.increment||0)).toFixed(1)} kg.`;
  } else if(p.type==='weekly_rep'){
    const maxR=Math.max(...last.sets.map(s=>Number(s.reps)||0));
    msg+=` ‚Üí F√∂rslag: +1 rep (t.ex. ${maxR+1}).`;
  }
  el.textContent=msg;
}

// ===== √ñvningar (med viktf√∂rslag fr√•n senaste passet)
const exercisesPanel = document.getElementById('exercisesPanel');
function renderExercises(){
  exercisesPanel.innerHTML='';
  if(!selectedDay){
    exercisesPanel.append(h('p',{class:'empty'},'V√§lj en dag ovan.'));
    return;
  }
  const list = PROGRAM[selectedDay];

  list.forEach(ex=>{
    const container = h('div',{class:'exercise'});
    const title = h('h3',{}, ex.name);
    const range = h('span',{class:'pill'}, fmtRange(ex.range));
    const hint = h('div',{class:'hint', id:`hint-${ex.id}`});

    const head = h('div',{class:'sets-head'},
      h('label',{},'Set#'),
      h('label',{},'Reps'),
      h('label',{}, ex.bw ? 'Vikt (valfritt)' : 'Vikt (kg)'),
      h('div',{})
    );

    const sets = h('div',{class:'sets'});
    sets.append(head);

    // H√§mta senaste vikter f√∂r √∂vningen (oavsett dag)
    const last = lastFor(ex.id);
    const lastWeights = (!ex.bw && last && Array.isArray(last.sets))
      ? last.sets.map(s => (s && s.weight!=null && !isNaN(Number(s.weight))) ? Number(s.weight) : null)
      : [];
    const lastMaxWeight = lastWeights.filter(v=>v!=null).length
      ? Math.max(...lastWeights.filter(v=>v!=null))
      : null;

    const addSetRow = (i=1, reps='', weight='')=>{
      let suggested = weight;
      if(suggested==='' && !ex.bw){
        suggested = (lastWeights[i-1]!=null) ? lastWeights[i-1]
                  : (lastMaxWeight!=null ? lastMaxWeight : '');
      }
      const row = h('div',{class:'set-row'});
      row.append(
        h('div',{class:'muted'}, `#${i}`),
        h('input',{type:'number', inputmode:'numeric', min:0, step:1, placeholder:'reps', value:reps}),
        h('input',{type:'number', inputmode:'decimal', min:0, step: ex.progression?.increment || 0.5, placeholder: ex.bw ? 'valfritt' : 'kg', value: suggested}),
        h('button',{class:'ghost', type:'button', onclick:()=>{ row.remove(); renumber(sets); }}, '‚úï')
      );
      sets.append(row);
    };

    function renumber(grid){
      let i=1;
      [...grid.querySelectorAll('.set-row')].forEach(r=>{
        r.firstChild.textContent = `#${i++}`;
      });
    }

    for(let i=1;i<=3;i++) addSetRow(i);
    const addBtn = h('button',{class:'ghost', type:'button', onclick:()=>{ addSetRow(sets.querySelectorAll('.set-row').length+1); }}, '+ L√§gg till set');

    container.append(
      h('div',{class:'row', style:'align-items:baseline;justify-content:space-between'}, h('div',{}, title, ' ', range), addBtn),
      sets,
      h('div',{class:'note'}, ex.note || ruleText(ex)),
      hint
    );

    exercisesPanel.append(container);
    updateHint(ex, hint);
  });
}

function ruleText(ex){
  if(!ex.progression) return '';
  const p=ex.progression;
  if(p.type==='weekly_weight') return `Riktlinje: √∂ka ~${p.increment} kg/vecka n√§r tekniken k√§nns bra.`;
  if(p.type==='weekly_rep') return `Riktlinje: √∂ka ~1 rep/vecka.`;
  return '';
}

// ===== Knappar & inputs
const dateInput = document.getElementById('date');
const saveBtn = document.getElementById('saveBtn');
const syncBtn = document.getElementById('syncBtn');
const pullBtn = document.getElementById('pullBtn');
const cfgBtn = document.getElementById('cfgBtn');

dateInput.value = todayISO();

saveBtn.addEventListener('click', ()=>{
  if(!selectedDay){ alert('V√§lj dag f√∂rst.'); return; }
  const list=PROGRAM[selectedDay];
  const entries=[];
  const exEls=[...exercisesPanel.querySelectorAll('.exercise')];
  exEls.forEach((wrap, idx)=>{
    const ex=list[idx];
    const rows=[...wrap.querySelectorAll('.set-row')];
    const sets=rows.map(r=>{
      const [lbl, repsEl, wEl] = r.children;
      return { reps:Number(repsEl.value||0), weight:Number(wEl.value||0) || (ex.bw? null : 0) };
    }).filter(s=>(s.reps||0)>0);
    if(sets.length) entries.push({ id:ex.id, exercise:ex.name, sets });
  });
  if(!entries.length){ alert('Fyll i minst ett set.'); return; }
  const log={ date:dateInput.value, day:selectedDay, entries };
  const logs=readLogs(); logs.push(log); writeLogs(logs); updateHistory();
  // uppdatera hintar p√• aktuell dag
  PROGRAM[selectedDay].forEach(ex=>{ const el=document.getElementById(`hint-${ex.id}`); if(el) updateHint(ex, el); });
  alert('Sparat!');
});

/* ===== S√ÑKER MERGE (ingen radering vid synk) ===== */
function clone(obj){ return JSON.parse(JSON.stringify(obj||null)); }
function keyWorkout(w){ return `${w.date}|${w.day}`; }
function keySet(s){ const w = (s.weight===null||s.weight===undefined)?'':Number(s.weight); return `${Number(s.reps||0)}@${w}`; }
function keyExercise(e){ return (e.id||e.exercise||'').toString(); }
function mergeLogs(localArr, remoteArr){
  const A = Array.isArray(localArr)? clone(localArr):[];
  const B = Array.isArray(remoteArr)? clone(remoteArr):[];
  const map = new Map();
  for(const w of B){ map.set(keyWorkout(w), w); }
  for(const w of A){
    const k = keyWorkout(w);
    if(!map.has(k)){ map.set(k, w); continue; }
    const base = map.get(k);
    const byEx = new Map();
    for(const e of (base.entries||[])){ byEx.set(keyExercise(e), clone(e)); }
    for(const e of (w.entries||[])){
      const id = keyExercise(e);
      if(!byEx.has(id)){ byEx.set(id, clone(e)); continue; }
      const target = byEx.get(id);
      const seen = new Set((target.sets||[]).map(keySet));
      for(const s of (e.sets||[])){
        const kset = keySet(s);
        if(!seen.has(kset)){ (target.sets = target.sets||[]).push(clone(s)); seen.add(kset); }
      }
    }
    base.entries = Array.from(byEx.values());
  }
  const out = Array.from(map.values());
  out.sort((a,b)=> String(a.date).localeCompare(String(b.date)) );
  return out;
}

// GitHub sync (s√§ker merge)
async function doSync(){
  try{
    loadGhCfg(); // l√§s sparade (inkl token)
    let remote = [];
    try{
      const obj = await ghGetFile();
      if(obj){ remote = JSON.parse(b64DecodeUnicode(obj.content)); }
    }catch{}
    const local = readLogs();
    const merged = mergeLogs(local, remote);
    const txt = JSON.stringify(merged, null, 2);
    await ghPutFile(txt);
    alert('Synk klar (mergad, inget borttaget)!');
  }catch(e){
    alert('Synk fel: ' + e.message);
  }
}

async function doPull(){
  try{
    loadGhCfg();
    const obj = await ghGetFile();
    if(!obj){ alert('Filen finns inte i repo √§nnu. K√∂r "Synka" f√∂rst.'); return; }
    const remote = JSON.parse(b64DecodeUnicode(obj.content));
    const local = readLogs();
    const merged = mergeLogs(local, remote);
    writeLogs(merged);
    updateHistory();
    if(selectedDay) renderExercises();
    alert('H√§mtat & sammanslaget fr√•n GitHub!');
  }catch(e){
    alert('H√§mtningsfel: ' + e.message);
  }
}

syncBtn.addEventListener('click', doSync);
pullBtn.addEventListener('click', doPull);

// ===== Inst√§llningsmodal
const cfgModal = document.getElementById('cfgModal');
const cfgClose = document.getElementById('cfgClose');
const cfgSave = document.getElementById('cfgSave');
const ghOwner = document.getElementById('ghOwner');
const ghRepo  = document.getElementById('ghRepo');
const ghBranch= document.getElementById('ghBranch');
const ghPath  = document.getElementById('ghPath');
const ghToken = document.getElementById('ghToken');

cfgBtn.addEventListener('click', ()=>{
  loadGhCfg();
  ghOwner.value = GH.owner || 'Xzyrxios';
  ghRepo.value  = GH.repo  || 'gym';
  ghBranch.value= GH.branch|| 'main';
  ghPath.value  = GH.path  || 'data/traningslogg.json';
  ghToken.value = GH.token || '';
  cfgModal.classList.add('open');
});
cfgClose.addEventListener('click', ()=>{ cfgModal.classList.remove('open'); });
cfgSave.addEventListener('click', ()=>{
  GH.owner = ghOwner.value.trim() || 'Xzyrxios';
  GH.repo  = ghRepo.value.trim()  || 'gym';
  GH.branch= ghBranch.value.trim()|| 'main';
  GH.path  = ghPath.value.trim()  || 'data/traningslogg.json';
  GH.token = ghToken.value.trim(); // lagras en g√•ng
  saveGhCfg();
  cfgModal.classList.remove('open');
  alert('Inst√§llningar sparade.');
});

// Init
dateInput.value = todayISO();
updateHistory();
</script>
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js').catch(console.error);
    });
  }
</script>

</body>
</html>
